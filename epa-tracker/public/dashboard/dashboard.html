<div ng-controller="dashboardCtrl">
  <div class="container-fluid">
    <div class="row block">
      <div class="col-xs-12 col-md-10 col-md-offset-1">
        <div style="font-size: 28px" align="center">{{name}}</div>
      </div>
    </div>

    <div class="flex-container">
      <div class="flex-item">
        <button type="button" id="chartHelp" class="glyphicon glyphicon-info-sign btn btn-link" data-toggle="modal" data-target="#helpModal" ng-click="displayHelp($event);"></button>
        <div id="chart"></div>
      </div>
      <div class="flex-item" id="deltas">
        <button type="button" id="regHelp" class="glyphicon glyphicon-info-sign btn btn-link" data-toggle="modal" data-target="#helpModal" ng-click="displayHelp($event);"></button>
        <div style="font-size: 24px; padding-top: 6%;" align="center">Recent Changes to EPA</div>
        <div class = "row" style="padding-top: 7%;">
          <div class="col-xs-5 col-xs-offset-1" align="center">
            <div style="font-size: 22px">Regressed</div>
            <span class="glyphicon glyphicon-arrow-down"></span>
            <!-- <div ng-repeat="epa in summaryDeltas.Regressed">
              <a href="#/details/{{epa}}">EPA {{epa}}</a>
            </div> -->
            <div class="epa-count">
              {{summaryDeltas.Regressed.length}}
            </div>
          </div>
          <!-- <span class="glyphicon glyphicon-sort" style="font-size: 100px; color: #F9AE1D;"></span> -->
          <div class="col-xs-5" align="center">
            <div style="font-size: 22px">Improved</div>
            <span class="glyphicon glyphicon-arrow-up"></span>
            <!-- <div ng-repeat="epa in summaryDeltas.Improved">
              <a href="#/details/{{epa}}">EPA {{epa}}</a>
            </div> -->
            <div class="epa-count">
              {{summaryDeltas.Improved.length}}
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row block">
      <div class="col-xs-12 col-md-10 col-md-offset-1">
        <button type="button" id="listHelp" class="glyphicon glyphicon-info-sign btn btn-link" data-toggle="modal" data-target="#helpModal" ng-click="displayHelp($event);"></button>
        <h3 align="center">
          EPA List by Mastery Level
        </h3>
        <div class="row">
          <div class ="col-md-2"></div>
          <div class = "col-md-2" ng-repeat="(key, level) in graphData">
            <div align = "center">
              <h4>{{key}}</h4>
              <div ng-repeat="epa in level | orderBy:epa">
                <span ng-if="summaryDeltas.Regressed.indexOf(epa) > -1">
                  <span class="glyphicon glyphicon-arrow-down" style="color: #D32F2F;"></span>
                </span>
                <span ng-if="summaryDeltas.Improved.indexOf(epa) > -1">
                  <span class="glyphicon glyphicon-arrow-up" style="color: #388E3C;"></span>
                </span>
                <a href="#/"+{{id}}+"/details/{{epa}}">EPA {{epa}}</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div id="helpModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Help</h4>
        </div>
        <div class="modal-body">
          {{helpText}}
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

</div>
